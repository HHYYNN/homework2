<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>计算器</title>
<script type="text/javascript">
	var num=0;
	var result=0;
	var numshow="0";
	var shuru=0;//输入状态
	var jisuan=0;//计算状态
	var quit=0;//防止重复输入
	var saveDate=0;
	function command(num){
		var str=String(document.myform.calculator.value);
		str=(str!="0") ? ((shuru==0) ? str : "") : ""; 
		str=str+String(num);
		document.myform.calculator.value=str;
		shuru=0;
		quit=0;
	}

	function dot(){
		var str=String(document.myform.calculator.value);
		str=(str!="0") ? ((shuru==0) ? str : "0") : "0"; 
		for(i=0; i<=str.length;i++){ //判断是否已经有一个点号 
			if(str.substr(i,1)==".") return false; //如果有则不再插入 
				} 
				str=str + "."; 
	 			document.myform.calculator.value=str; 
 				shuru=0; 
		}
			
		
	
	function del(){
		var str=String(document.myform.calculator.value);
		str=(str!="0")?str:"";
		str=str.substr(0,str.length-1);
		str=(str!="")?str:"0";
		document.myform.calculator.value=str;
		
	}
	function clearscreen(){
		num=0;
		result=0;
		numshow="0";
		document.myform.calculator.value="0";
		
	}
	function calculate(){
		numshow=Number(document.myform.calculator.value);
		if(num!=0&&quit!=1){
			switch(jisuan){
				case 1:
				result=num+numshow;
				break;
				case 2:
				result=num-numshow;
				break;
				case 3:
				result=num*numshow;
				break;
				case 4:
				if(numshow!=0){
					result=num/numshow;
				}else{
					result=0000;
				}
				break;
				case 5:
				result=num%numshow;
				break;
				case 6:
				result=saveDate+numshow;
				break;
				case 7:
				result=saveDate*numshow;
				break;
			}
			quit=1;
		}
		else{
			result=numshow;
			}
			numshow=String(result);
			document.myform.calculator.value=numshow;
			num=result;
	}
	
	function plus(){
		calculate();
		shuru=1;
		jisuan=1;
	}
	function minus(){
		calculate();
		shuru=1;
		jisuan=2;
	}
	function times(){
		calculate();
		shuru=1;
		jisuan=3;
	}
	function divide(){
		calculate();
		shuru=1;
		jisuan=4;
	}
	function persent(){
		calculate();
		shuru=1;
		jisuan=5;
	}
	function equal(){
		calculate(); 
		shuru=1; 
 		num=0; 
 		result=0; 
 		numshow="0"; 
	}
	function saveDate2(){
		saveDate=Number(document.myform.calculator.value);
		shuru=1;

	}
	function getDates2(){
		showDate();
		shuru=1;
		document.myform.calculator.value=saveDate;	
	}
	function totleDate(){
		
		shuru=1;
		calculate();
		jisuan=6;
	}
	function chengDate(){
		shuru=1;
		calculate();
		jisuan=7;
	}
	function showDate(){
		var str=Number(document.myform.calculator.value);
	}
	function clearDate(){
		saveDate=0;
	}
	function del(){
		
		var str=String(document.myform.calculator.value); 
		 str=(str!="0") ? str : ""; 
 			str=str.substr(0,str.length-1); 
		 	str=(str!="") ? str : "0"; 
 			document.myform.calculator.value=str; 
	}
	function clearscreen(){ 
		num=0; 
 		result=0; 
 		numshow="0"; 
 		document.myform.calculator.value="0"; 
 } 
</script>
</head>
<style type="text/css">
.bt{
	margin:3px 7px;
	text-align:center;
	padding-left:10px;
	padding-top:5px;
	background-color:#999;
	color:#000;
	width:45px;}
.wenben{
	height:500px;
	width:300px;
	border:1px #000000;
	background-color:#999;
	color:#000;}
#main{
	background-image:url(bg.jpg);
	width:300px;
	height:250px;
	margin:auto;}
#show{
	margin-top:5px;
	margin-left:40px;
	height:30px;}
s
</style>
<body>
	<form name="myform" action="" method="" >
    <div id="main">
    	<div id="show"><input name="calculator" type="text" size="30" style="font-weight:300" /></div>

    	<table width="220px" cellpadding="0" cellspacing="0" align="center" background="chap3素材/6.学生练习素材/11何豫年 任务3.1/计算器/bg.jpg">
        	
            <tr>
            	<td><input type="button" value="存储" width="50"  onclick="saveDate2()" class="bt"/></td>
                <td><input type="button" value="取存" width="50"  onclick="getDates2()" class="bt"/></td>
                <td><input type="button" value="退格" width="50" onclick="del()" class="bt"/></td>
                <td><input type="button" value="清屏" width="50" onclick="clearscreen()" class="bt"/></td>
            </tr>
            <tr>
            	<td><input type="button" value="累存" width="50" class="bt" onclick="totleDate()"/></td>
                <td><input type="button" value="积存" width="50" class="bt"  onclick="chengDate()"/></td>
                <td><input type="button" value="清存" width="50"  class="bt" onclick="clearDate()"/></td>
                <td><input type="button" value="/" width="50"  onclick="divide()" class="bt"/></td>
            </tr>
            <tr>
            	<td><input type="button" value="7" width="50" onclick="command(7)" class="bt"/></td>
                <td><input type="button" value="8" width="50" onclick="command(8)" class="bt"/></td>
                <td><input type="button" value="9" width="50"  onclick="command(9)" class="bt"/></td>
                <td><input type="button" value="x" width="50"  onclick="times()" class="bt"/></td>
            </tr>
            <tr>
            	<td><input type="button" value="4" width="50" onclick="command(4)" class="bt"/></td>
                <td><input type="button" value="5" width="50" onclick="command(5)" class="bt"/></td>
                <td><input type="button" value="6" width="50" onclick="command(6)" class="bt"/></td>
                <td><input type="button" value="-" width="50" onclick="minus()" class="bt"/></td>
            </tr>
            <tr>
            	<td><input type="button" value="1" width="50" onclick="command(1)" class="bt"/></td>
                <td><input type="button" value="2" width="50" onclick="command(2)" class="bt"/></td>
                <td><input type="button" value="3" width="50" onclick="command(3)" class="bt"/></td>
                <td><input type="button" value="+" width="50" onclick="plus()" class="bt"/></td>
            </tr>
            <tr>
            	<td><input type="button" value="0" width="50" onclick="command(0)" class="bt"/></td>
                <td><input type="button" value="." width="50" onclick="dot()" class="bt"/></td>
                <td><input type="button" value="+/-" width="50"  class="bt"/></td>
                <td><input type="button" value="=" width="50" onclick="equal()" class="bt"/></td>
            </tr>
            
        </table>
        </div>
    </form> 
</body>
</html>
